import{c as $,b9 as B,K as O,J as T,r,I as N,L as W,u as z,ba as h,au as j,k as x,w as A,l as y,m as D,n as c,H as E,q as S,aN as G,s as n,O as M,al as K,G as s,N as i,V as H,P,Q as k,R as F,U as q,bb as J,a5 as _,T as Q,aB as X,bc as Y,W as Z,bd as ee,F as ae,be as te,_ as se}from"./index-jqZ7_Kfc.js";const le={class:"w-full h-full"},oe=["src"],ne={class:"flex items-center justify-between"},ie=$({__name:"IFrame",props:{widget:{}},setup(U){B(e=>({"6f3b78bf":R.value}));const C=O(),u=T(),m=r(),a=N(U).widget,g=r(!1),f=r(0),l=r(a.value.options.source),d=r(!1),p=r(""),v=e=>te(e)?!0:"URL is not valid.",w=()=>{const e=v(l.value);if(e!==!0){p.value=`${e} Please enter a valid URL.`,d.value=!0;return}a.value.options.source=l.value,p.value=`IFrame URL sucessfully updated to '${l.value}'.`,d.value=!0};W(()=>{console.log("1"),window.addEventListener("message",e=>{console.log(e)},!1),setInterval(()=>{const e=`SENDING ${z().attitude.yaw}`;console.log(e),m.value.contentWindow.postMessage({source:"parent",text:e},"*")},1e3),Object.keys(a.value.options).length===0&&(a.value.options={source:h},l.value=h)});const{width:V,height:b}=j(),L=x(()=>{let e="";return e=e.concat(" ","position: absolute;"),e=e.concat(" ",`left: ${a.value.position.x*V.value}px;`),e=e.concat(" ",`top: ${a.value.position.y*b.value}px;`),e=e.concat(" ",`width: ${a.value.size.width*V.value}px;`),e=e.concat(" ",`height: ${a.value.size.height*b.value}px;`),u.editingMode&&(e=e.concat(" ","pointer-events:none; border:0;")),u.isWidgetVisible(a.value)||(e=e.concat(" ","display: none;")),e}),R=x(()=>(100-f.value)/100);function I(){console.log("Finished loading"),g.value=!0}return A(a,()=>{u.widgetManagerVars(a.value.hash).configMenuOpen===!1&&v(l.value)!==!0&&(l.value=a.value.options.source)},{deep:!0}),(e,t)=>(y(),D(ae,null,[c("div",le,[(y(),E(K,{to:".widgets-view"},[S(c("iframe",{ref_key:"iframe",ref:m,src:n(a).options.source,style:M(L.value),frameborder:"0",onLoad:I},null,44,oe),[[G,g.value]])])),s(Z,{modelValue:n(u).widgetManagerVars(n(a).hash).configMenuOpen,"onUpdate:modelValue":t[3]||(t[3]=o=>n(u).widgetManagerVars(n(a).hash).configMenuOpen=o),"min-width":"400","max-width":"35%"},{default:i(()=>[s(H,{class:"pa-2",style:M(n(C).globalGlassMenuStyles)},{default:i(()=>[s(P,{class:"text-center"},{default:i(()=>t[5]||(t[5]=[k("Settings")])),_:1}),s(F,null,{default:i(()=>[t[6]||(t[6]=c("p",null,"Iframe Source",-1)),c("div",ne,[s(q,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),variant:"filled",outlined:"",rules:[v],onKeydown:J(w,["enter"])},null,8,["modelValue","rules"]),S(s(_,{icon:"mdi-check",class:"mx-1 mb-5 bg-[#FFFFFF22]",rounded:"lg",flat:"",onClick:w},null,512),[[Q,"Set",void 0,{bottom:!0}]])])]),_:1}),s(F,null,{default:i(()=>[s(X,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=o=>f.value=o),label:"Transparency",color:"white",min:0,max:90},null,8,["modelValue"])]),_:1}),s(Y,{class:"flex justify-end"},{default:i(()=>[s(_,{color:"white",onClick:t[2]||(t[2]=o=>n(u).widgetManagerVars(n(a).hash).configMenuOpen=!1)},{default:i(()=>t[7]||(t[7]=[k(" Close ")])),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])]),s(ee,{"open-snackbar":d.value,message:p.value,duration:3e3,"close-button":!1,"onUpdate:openSnackbar":t[4]||(t[4]=o=>d.value=o)},null,8,["open-snackbar","message"])],64))}}),de=se(ie,[["__scopeId","data-v-22bb257f"]]);export{de as default};
